<!doctype html>
<html lang="en">

  <head>
    <meta charset="utf-8">

    <title>NAZS</title>

    <meta name="author" content="Carlos Pérez-Aradros Herce">

    <meta name="apple-mobile-web-app-capable" content="yes" />
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent" />

    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">

    <link rel="stylesheet" type="text/css" href="https://exekias.github.io/reveal.js/css/reveal.min.css">
    <link rel="stylesheet" type="text/css" href="https://exekias.github.io/reveal.js/css/theme/night.css" id="theme">

    <!-- For syntax highlighting -->
    <link rel="stylesheet" href="https://exekias.github.io/reveal.js/lib/css/zenburn.css">

    <!-- If the query includes 'print-pdf', include the PDF print sheet -->
    <script>
      if( window.location.search.match( /print-pdf/gi ) ) {
        var link = document.createElement( 'link' );
        link.rel = 'stylesheet';
        link.type = 'text/css';
        link.href = 'https://exekias.github.io/reveal.js/css/print/pdf.css';
        document.getElementsByTagName( 'head' )[0].appendChild( link );
      }
    </script>

    <!--[if lt IE 9]>
    <script src="lib/js/html5shiv.js"></script>
    <![endif]-->
  </head>

  <body>

    <div class="reveal">

      <!-- Any section element inside of this container is displayed as a slide -->
      <div class="slides">
        <section data-markdown data-background="url(servers.jpg)" data-background-size="100%">
          # NAZS
          ### Server management framework
        </section>

        <section data-markdown>
          ## Current scenario @zentyal

          ***Zentyal Server***: lots of modules, coupled, old code

          ***Zentyal Cloud***: specific scenario, puppet, no product
        </section>

        <section data-markdown>
          ## Current scenario @zentyal

          * Duplicated effort

          * Distributed vs Centralized

          * Less testing
        </section>

        <section data-markdown>
          ## NAZS Goals

          Provide a **lightweight** framework for **easy and fast** development
          of apps to deploy **distributed** services
        </section>

        <section data-markdown>
          ## NAZS Philosophy

          * Don't reinvent the wheel
          * Use modern technologies
          * Easy to develop
          * Cloud first
        </section>

        <section data-markdown>
          ## Current stack

          * Python >= 2.7
          * Django >= 1.6
          * SQLite (conf)
          * Achilles (GUI)
        </section>

        <section data-markdown>
          ## Features

          * Model / View separation
          * Module lifecycle revisited
          * Autogenerated GUI
          * Conf files with templating
          * Daemon management
          * System access (sudo, commands)
        </section>

        <section data-markdown>
          ## Models

          * Django models
          * Fully documented
          * Data and schema migrations
          * Validations (field validators, forms)
        </section>

        <section data-markdown>
          ## Models

          ```python
class DomainSettings(models.SingletonModel):

    MODE_CHOICES = (
        ('ad', _('Domain controller')),
        ('member', _('Domain member')),
    )

    mode = models.CharField(choices=MODE_CHOICES, default='ad', max_length=10)

    domain = models.CharField(max_length=20, default='nazs')

    workgroup = models.CharField(max_length=20, default='NAZS')

    realm = models.CharField(max_length=20, default='NAZS.LAN')

    netbios = models.CharField(max_length=20, default='DC')

    description = models.CharField(max_length=20, default='NAZS server')
          ```
        </section>

        <section data-markdown>
          ## GUI

          * Optional
          * Generated from models
          * ... or manually
        </section>

        <section data-markdown>
          ## System goodies

          ```python
# Commands
with root():
    run('rm -rf /')

# Daemons
postfix = InitDaemon('postfix')

dovecot = InitDaemon('dovecot')

# Conf files
pfmain = TemplateConfFile('/etc/postfix/main.cf',
                          template='main.cf',
                          mode=0600,
                          template_params=lambda: {
                  'settings': MailSettings.get()
                })
          ```
        </section>

        <section data-markdown>
          ## Development

          * Python
          * Easy env bootstrap (vagrant/docker)
          * Develop mode
          * Migrations as part of development process
        </section>

        <section data-markdown>
          ### Backup & Deploy templates (WIP)
          ```shell
root@dc:~# nazs dumpdata --indent=4 samba
[
{
    "pk": 1,
    "model": "samba.domainsettings",
    "fields": {
        "domain": "nazs",
        "realm": "NAZS.LAN",
        "workgroup": "NAZS",
        "description": "NAZS server",
        "mode": "ad",
        "netbios": "DC"
    }
}
]

          ```
        </section>

        <section data-markdown>
          ## Testing

          * Unit testing at framework level
          * Integration tests using recipes (no selenium needed)
        </section>

        <section data-markdown>
          # Demo time
        </section>

        <section data-markdown>
          ## Benefits

          * Distributed
          * Good learning curve
          * Python bindings (Samba/OpenChange)
          * Scripting
          * Long term development unify
        </section>

        <section data-markdown>
          ## Similar stuff

          * Ansible
          * ArkOS
          * Puppet/Chef
          * Salt
        </section>

        <section data-markdown>
          ## Next steps

          * Open the framework
          * Continue working (involve more developers willing to help)
          * Complete pending features (services catalog, packaging)
          * Replace puppet with nazs modules
          * ...
        </section>

        <section data-markdown>
          # Thank you!
          ### Any question?

          Carlos Pérez-Aradros Herce

          [@exekias](https://www.twitter.com/exekias) / [exekias.me](https://exekias.me)
        </section>

      </div>

    </div>

    <script src="https://exekias.github.io/reveal.js/lib/js/head.min.js"></script>
    <script src="https://exekias.github.io/reveal.js/js/reveal.min.js"></script>

    <script>
      // Full list of configuration options available here:
      // https://github.com/hakimel/reveal.js#configuration
      Reveal.initialize({
        controls: false,
        progress: true,
        history: true,
        center: true,

        transition: 'linear', // default/cube/page/concave/zoom/linear/fade/none
        transitionSpeed: 'fast',

        // Optional libraries used to extend on reveal.js
        dependencies: [
          { src: 'https://exekias.github.io/reveal.js/plugin/highlight/highlight.js', async: true, callback: function() { hljs.initHighlightingOnLoad(); } },
          // Interpret Markdown in <section> elements
          { src: 'https://exekias.github.io/reveal.js/plugin/markdown/marked.js', condition: function() { return !!document.querySelector( '[data-markdown]' ); } },
          { src: 'https://exekias.github.io/reveal.js/plugin/markdown/markdown.js', condition: function() { return !!document.querySelector( '[data-markdown]' ); } },

        ]
      });
    </script>

  </body>
</html>
